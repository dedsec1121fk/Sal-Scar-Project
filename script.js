const i18n = {
  en: {
    skip: "Skip to content",
    brand_role: "CYBEROPS CONSULTANT",
    nav_about: "About",
    nav_skills: "Skills",
    nav_experience: "Experience",
    nav_certs: "Certifications",
    nav_contact: "Contact",
    hero_eyebrow: "OFFENSIVE SECURITY Â· CLEAR REPORTING",
    hero_title_a: "Offensive security.",
    hero_title_b: "Clear, actionable reporting.",
    hero_lead:
      "Iâ€™m Sal Scar, a CyberOps Consultant specializing in offensive security. I perform Web, API, Mobile (Android & iOS), and Network penetration testing & vulnerability assessment, including mobile static analysis â€” with client-ready technical reporting.",
    cta_experience: "View experience",
    cta_contact: "Contact",
    stat_role_k: "Current role",
    stat_role_v: "CyberOps Consultant",
    stat_since_k: "Since",
    stat_since_v: "2019",
    stat_deliver_k: "Deliverable",
    stat_deliver_v: "Actionable reports",
    profile_kicker: "PROFILE",
    profile_pill: "Available",
    profile_subtitle: "CyberOps Consultant â€” Offensive Security (Web Â· API Â· Mobile Â· Network)",
    kv_email_k: "Email",
    kv_tools_k: "Skills",
    kv_tools_v: "Burp Suite Â· Postman Â· Nessus Â· Frida Â· Objection",
    profile_note: "Focused on real-world impact, clear evidence, and remediation guidance you can act on.",
    about_title: "About",
    about_sub: "What I do and what you can expect.",
    about_h3_1: "Engagements",
    about_p_1:
      "I perform penetration testing and vulnerability assessments across web applications, APIs, mobile apps (Android & iOS), and networks. When needed, I also perform static analysis on mobile applications.",
    about_h3_2: "Reporting & communication",
    about_p_2:
      "I prepare detailed technical reports and present findings clearly â€” so teams can prioritize fixes, validate remediation, and reduce risk without guesswork.",
    approach_k: "APPROACH",
    approach_v:
      "Real-world impact, reproducible steps, and evidence-backed severity â€” every finding is useful, not noisy.",
    skills_title: "Skills",
    skills_sub: "A focused toolkit for validation and delivery.",
    skills_h3_1: "Web & API",
    skills_w1: "Manual testing with targeted validation",
    skills_w2: "Authentication & authorization review",
    skills_w3: "Evidence capture and reproducible steps",
    skills_h3_2: "Mobile",
    skills_m1: "Android & iOS penetration testing",
    skills_m2: "Static analysis and security review",
    skills_m3: "Runtime instrumentation when required",
    skills_h3_3: "Delivery",
    skills_d1: "Clear severity and remediation guidance",
    skills_d2: "Executive summary + technical detail",
    skills_d3: "Stakeholder-ready presentation of findings",
    exp_title: "Experience",
    exp_sub: "Roles and responsibilities (from CV).",
    exp_r1: "CyberOps Consultant",
    exp_t1: "Oct 2021 â€” Present",
    exp1_1: "Perform Web, Mobile (Android & iOS), Network and API penetration testing and vulnerability assessment.",
    exp1_2: "Perform static analysis on mobile devices.",
    exp1_3: "Prepare detailed technical reports based on testing results.",
    exp1_4: "Communicate and present findings to clients.",
    exp_r2: "IT Security Engineer",
    exp_t2: "Jun 2020 â€” Sep 2021",
    exp2_1: "Perform Web and Mobile penetration testing and vulnerability assessment.",
    exp2_2: "Monitor source code to identify and safeguard sensitive information.",
    exp2_3: "Compile monthly reports on security incidents.",
    exp2_4: "Validate bug bounty submissions.",
    exp_r3: "Cyber Security Analyst Intern",
    exp_t3: "Feb 2019 â€” Feb 2020",
    exp3_1: "Investigate digital cases using digital forensic tools.",
    exp3_2: "Assist co-workers with vulnerability assessments and penetration tests.",
    exp3_3: "Research collaboration strategies between Blue Team and Red Team.",
    certs_title: "Certifications",
    certs_sub: "Recognized credentials.",
    cert_oscp: "Offensive Security Certified Professional â€” OFFSEC",
    issued_jul_2024: "Issued July 2024",
    cert_crto: "Certified Red Team Operator â€” Zero-Point Security Ltd",
    issued_dec_2024: "Issued December 2024",
    cert_iso: "Certified ISO/IEC 27001:2013 Lead Auditor â€” IRCA",
    issued_jul_2022: "Issued July 2022",
    cert_ceh: "Certified Ethical Hacker â€” EC-COUNCIL",
    issued_jul_2020: "Issued July 2020",
    contact_title: "Contact",
    contact_sub: "Reach out via email for scope and availability.",
    contact_h3: "Email",
    contact_p: "Fastest way to reach me:",
    contact_k: "WHAT TO INCLUDE",
    contact_b1: "Scope (web / API / mobile / network)",
    contact_b2: "Environment (prod, staging, test accounts)",
    contact_b3: "Desired output (report, retest, workshop)",
    availability_title: "Availability",
    availability_text:
      "I can usually start within 1â€“2 weeks depending on scope. Fast-turn retests are available when fixes are ready.",
    deliverables_title: "DELIVERABLES",
    deliv_li_1: "Executive summary + technical details",
    deliv_li_2: "Reproduction steps and evidence",
    deliv_li_3: "Remediation guidance and retest notes",
    back_to_top: "Back to top",
    copied: "Copied to clipboard",
    copy_hint: "Tap to copy"
  },
  id: {
    skip: "Lewati ke konten",
    brand_role: "KONSULTAN CYBEROPS",
    nav_about: "Tentang",
    nav_skills: "Keahlian",
    nav_experience: "Pengalaman",
    nav_certs: "Sertifikasi",
    nav_contact: "Kontak",
    hero_eyebrow: "OFFENSIVE SECURITY Â· LAPORAN JELAS",
    hero_title_a: "Offensive security.",
    hero_title_b: "Pelaporan yang jelas dan dapat ditindaklanjuti.",
    hero_lead:
      "Saya Sal Scar, Konsultan CyberOps dengan fokus pada offensive security. Saya melakukan pengujian penetrasi & asesmen kerentanan untuk Web, API, Mobile (Android & iOS), dan Network, termasuk analisis statis aplikasi mobile â€” dengan laporan teknis siap klien.",
    cta_experience: "Lihat pengalaman",
    cta_contact: "Kontak",
    stat_role_k: "Peran saat ini",
    stat_role_v: "Konsultan CyberOps",
    stat_since_k: "Sejak",
    stat_since_v: "2019",
    stat_deliver_k: "Hasil",
    stat_deliver_v: "Laporan yang dapat ditindaklanjuti",
    profile_kicker: "PROFIL",
    profile_pill: "Tersedia",
    profile_subtitle: "Konsultan CyberOps â€” Offensive Security (Web Â· API Â· Mobile Â· Network)",
    kv_email_k: "Email",
    kv_tools_k: "Keahlian",
    kv_tools_v: "Burp Suite Â· Postman Â· Nessus Â· Frida Â· Objection",
    profile_note: "Fokus pada dampak nyata, bukti yang jelas, dan panduan perbaikan yang bisa ditindaklanjuti.",
    about_title: "Tentang",
    about_sub: "Apa yang saya lakukan dan apa yang bisa Anda harapkan.",
    about_h3_1: "Engagement",
    about_p_1:
      "Saya melakukan pengujian penetrasi dan asesmen kerentanan pada aplikasi web, API, aplikasi mobile (Android & iOS), dan jaringan. Jika diperlukan, saya juga melakukan analisis statis pada aplikasi mobile.",
    about_h3_2: "Pelaporan & komunikasi",
    about_p_2:
      "Saya menyusun laporan teknis yang detail dan menyampaikan temuan dengan jelas â€” agar tim bisa memprioritaskan perbaikan, memvalidasi remediation, dan mengurangi risiko.",
    approach_k: "PENDEKATAN",
    approach_v:
      "Dampak dunia nyata, langkah yang bisa direproduksi, dan severity berbasis bukti â€” setiap temuan berguna, bukan berisik.",
    skills_title: "Keahlian",
    skills_sub: "Toolkit yang fokus untuk validasi dan delivery.",
    skills_h3_1: "Web & API",
    skills_w1: "Pengujian manual dengan validasi terarah",
    skills_w2: "Review autentikasi & otorisasi",
    skills_w3: "Bukti dan langkah reproduksi",
    skills_h3_2: "Mobile",
    skills_m1: "Pengujian Android & iOS",
    skills_m2: "Analisis statis & review keamanan",
    skills_m3: "Instrumentasi runtime saat diperlukan",
    skills_h3_3: "Delivery",
    skills_d1: "Severity jelas dan panduan perbaikan",
    skills_d2: "Ringkasan eksekutif + detail teknis",
    skills_d3: "Penyajian temuan siap stakeholder",
    exp_title: "Pengalaman",
    exp_sub: "Peran dan tanggung jawab (dari CV).",
    exp_r1: "Konsultan CyberOps",
    exp_t1: "Okt 2021 â€” Sekarang",
    exp1_1: "Melakukan pengujian penetrasi dan asesmen kerentanan untuk Web, Mobile (Android & iOS), Network, dan API.",
    exp1_2: "Melakukan analisis statis pada perangkat/aplikasi mobile.",
    exp1_3: "Menyusun laporan teknis detail berdasarkan hasil pengujian.",
    exp1_4: "Menyampaikan dan mempresentasikan temuan kepada klien.",
    exp_r2: "IT Security Engineer",
    exp_t2: "Jun 2020 â€” Sep 2021",
    exp2_1: "Melakukan pengujian penetrasi Web dan Mobile serta asesmen kerentanan.",
    exp2_2: "Memantau source code untuk mengidentifikasi dan melindungi informasi sensitif.",
    exp2_3: "Menyusun laporan bulanan tentang insiden keamanan.",
    exp2_4: "Memvalidasi submission bug bounty.",
    exp_r3: "Cyber Security Analyst Intern",
    exp_t3: "Feb 2019 â€” Feb 2020",
    exp3_1: "Menyelidiki kasus digital menggunakan alat forensik digital.",
    exp3_2: "Membantu rekan kerja dalam asesmen kerentanan dan pengujian penetrasi.",
    exp3_3: "Meneliti strategi kolaborasi antara Blue Team dan Red Team.",
    certs_title: "Sertifikasi",
    certs_sub: "Kredensial yang diakui.",
    cert_oscp: "Offensive Security Certified Professional â€” OFFSEC",
    issued_jul_2024: "Terbit Juli 2024",
    cert_crto: "Certified Red Team Operator â€” Zero-Point Security Ltd",
    issued_dec_2024: "Terbit Desember 2024",
    cert_iso: "Certified ISO/IEC 27001:2013 Lead Auditor â€” IRCA",
    issued_jul_2022: "Terbit Juli 2022",
    cert_ceh: "Certified Ethical Hacker â€” EC-COUNCIL",
    issued_jul_2020: "Terbit Juli 2020",
    contact_title: "Kontak",
    contact_sub: "Hubungi via email untuk scope dan ketersediaan.",
    contact_h3: "Email",
    contact_p: "Cara tercepat menghubungi saya:",
    contact_k: "YANG PERLU DISERTAKAN",
    contact_b1: "Scope (web / API / mobile / network)",
    contact_b2: "Environment (prod, staging, akun uji)",
    contact_b3: "Output yang diinginkan (laporan, retest, workshop)",
    availability_title: "Ketersediaan",
    availability_text:
      "Biasanya saya bisa mulai dalam 1â€“2 minggu tergantung scope. Retest cepat tersedia saat perbaikan sudah siap.",
    deliverables_title: "DELIVERABLES",
    deliv_li_1: "Ringkasan eksekutif + detail teknis",
    deliv_li_2: "Langkah reproduksi dan bukti",
    deliv_li_3: "Panduan perbaikan dan catatan retest",
    back_to_top: "Kembali ke atas",
    copied: "Tersalin ke clipboard",
    copy_hint: "Ketuk untuk menyalin"
  }
};

function qs(sel, root=document){ return root.querySelector(sel); }
function qsa(sel, root=document){ return Array.from(root.querySelectorAll(sel)); }

function getTheme(){ return localStorage.getItem("theme") || "dark"; }
function getLang(){ return localStorage.getItem("lang") || "en"; }

function applyTheme(theme, persist=true){
  document.documentElement.setAttribute("data-theme", theme);
  if(persist) localStorage.setItem("theme", theme);

  const icon = qs("#themeIcon");
  const btn = qs("#themeToggle");

  if(theme === "light"){
    if(icon) icon.textContent = "â˜€ï¸";
    if(btn){
      btn.setAttribute("aria-label", "Switch to dark theme");
      btn.setAttribute("title", "Switch to dark theme");
    }
  }else{
    if(icon) icon.textContent = "ðŸŒ™";
    if(btn){
      btn.setAttribute("aria-label", "Switch to light theme");
      btn.setAttribute("title", "Switch to light theme");
    }
  }
}

function applyLang(lang){
  const dict = i18n[lang] || i18n.en;
  document.documentElement.setAttribute("data-lang", lang);
  document.documentElement.lang = (lang === "id") ? "id" : "en";

  qsa("[data-i18n]").forEach(el => {
    const key = el.getAttribute("data-i18n");
    if(!key) return;
    if(dict[key] !== undefined) el.textContent = dict[key];
  });

  qsa("[data-i18n-title]").forEach(el => {
    const key = el.getAttribute("data-i18n-title");
    if(!key) return;
    if(dict[key] !== undefined) el.setAttribute("title", dict[key]);
  });

  const langLabel = qs("#langLabel");
  if(langLabel) langLabel.textContent = (lang === "en") ? "ID" : "EN";
  localStorage.setItem("lang", lang);
}

async function copyText(text){
  if(navigator.clipboard && window.isSecureContext){
    await navigator.clipboard.writeText(text);
    return;
  }
  const ta = document.createElement("textarea");
  ta.value = text;
  ta.setAttribute("readonly", "");
  ta.style.position = "fixed";
  ta.style.left = "-9999px";
  document.body.appendChild(ta);
  ta.select();
  document.execCommand("copy");
  document.body.removeChild(ta);
}

let toastTimer = null;
function showToast(message){
  const toast = qs("#toast");
  if(!toast) return;
  toast.textContent = message;
  toast.classList.add("show");
  clearTimeout(toastTimer);
  toastTimer = setTimeout(() => toast.classList.remove("show"), 1600);
}

function setupCopyables(){
  qsa("[data-copy]").forEach(el => {
    const val = el.getAttribute("data-copy") || "";
    const handler = async () => {
      try{
        await copyText(val);
        const dict = i18n[getLang()] || i18n.en;
        showToast(dict.copied || "Copied");
      }catch{
        const dict = i18n[getLang()] || i18n.en;
        showToast(dict.copied || "Copied");
      }
    };

    el.addEventListener("click", handler);
    el.addEventListener("keydown", (e) => {
      if(e.key === "Enter" || e.key === " "){
        e.preventDefault();
        handler();
      }
    });
  });
}

document.addEventListener("DOMContentLoaded", () => {
  const theme = getTheme();
  const lang = getLang();

  applyTheme(theme, false);
  applyLang(lang);
  setupCopyables();

  const themeBtn = qs("#themeToggle");
  if(themeBtn){
    themeBtn.addEventListener("click", () => {
      const next = (getTheme() === "dark") ? "light" : "dark";
      applyTheme(next, true);
    });
  }

  const langBtn = qs("#langToggle");
  if(langBtn){
    langBtn.addEventListener("click", () => {
      const next = (getLang() === "en") ? "id" : "en";
      applyLang(next);
    });
  }
});
